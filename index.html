<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alan Belim P.S.</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;800&family=Playfair+Display:ital,wght@0,400;1,400&display=swap');

        /* --- GLOBAL RESET & BASE STYLES --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            background-color: #050505;
            font-family: 'Manrope', sans-serif;
            color: #e0e0e0;
            overflow-x: hidden;
            height: auto;
            min-height: 100%;
            scroll-behavior: smooth; 
        }

        body.locked {
            overflow: hidden;
            height: 100vh;
        }

        /* --- 3D BACKGROUND CANVAS --- */
        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0; 
            opacity: 0; 
            transition: opacity 1.5s ease;
            pointer-events: auto; 
        }
        
        #canvas-container canvas {
            display: block;
        }

        #main-content-wrapper {
            position: relative;
            width: 100%;
            z-index: 2; 
        }

        /* --- TYPOGRAPHY & UTILITIES --- */
        .blend-text {
            color: #fff;
            text-shadow: 0 0 1px #000000, 0 0 2px #000000; 
        }

        .frosted-box {
            background: rgba(10, 10, 10, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        /* --- CINEMATIC TITLE SCREEN --- */
        #title-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #050505;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: default;
            transition: opacity 1s ease 0.5s, visibility 1s 1.5s;
        }

        .massive-title {
            font-family: 'Manrope', sans-serif;
            font-weight: 800;
            font-size: 18vw; 
            line-height: 0.8;
            color: #fff;
            text-transform: uppercase;
            text-align: center;
            letter-spacing: -0.06em;
            white-space: nowrap;
            will-change: transform, opacity, filter, letter-spacing;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1), 
                        opacity 1.2s ease, 
                        filter 1.2s ease, 
                        letter-spacing 1.2s ease;
        }

        .scroll-prompt {
            position: absolute;
            bottom: 50px;
            font-size: 0.8rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            opacity: 0.5;
            animation: pulse 2s infinite;
        }

        #title-screen.disintegrate .massive-title {
            transform: scale(5); 
            opacity: 0;
            filter: blur(20px); 
            letter-spacing: 0.5em; 
        }

        #title-screen.disintegrate {
            opacity: 0;
            pointer-events: none;
        }

        /* --- NAVIGATION --- */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 30px 60px;
            box-sizing: border-box;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100; 
            pointer-events: none;
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0) 100%);
            transition: background-color 0.3s ease, opacity 1s ease 1.5s, transform 1s ease 1.5s;
            opacity: 0;
            transform: translateY(-20px);
        }

        .brand {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 500;
            letter-spacing: 0.02em;
            pointer-events: auto;
            color: #fff;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
        }

        .role {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.7;
            margin-top: 2px;
            color: #ccc;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
        }

        .menu-links {
            display: flex;
            gap: 30px;
            pointer-events: auto;
        }

        .nav-dropdown-container {
            position: relative;
            pointer-events: auto;
        }
        
        .menu-link {
            color: #fff;
            text-decoration: none;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.9;
            transition: opacity 0.3s;
            padding: 5px 0 15px 0; 
            display: block; 
            cursor: default; 
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
        }

        .menu-link:hover {
            opacity: 1;
        }
        
        .nav-dropdown {
            position: absolute;
            top: 100%; 
            left: 50%;
            transform: translateX(-50%) translateY(0); 
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 10px 0;
            border-radius: 8px;
            min-width: 150px;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, transform 0.3s ease;
            z-index: 100;
            pointer-events: none; 
            margin-top: -10px; 
        }
        
        .nav-dropdown-container:hover .nav-dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0); 
            pointer-events: auto; 
        }
        
        .nav-dropdown a {
            padding: 8px 15px;
            font-size: 0.75rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            display: block;
            color: #ccc; 
            opacity: 0.8; 
            transition: background 0.2s, opacity 0.2s, color 0.2s;
            text-align: center;
        }
        
        .nav-dropdown a:hover {
            opacity: 1;
            background: rgba(255, 255, 255, 0.05);
            color: #fff; 
        }

        /* --- SECTIONS (DESKTOP DEFAULT) --- */
        section {
            min-height: 100vh; 
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 0 10%;
            box-sizing: border-box;
            position: relative;
            pointer-events: auto;
        }

        /* 1. HERO SECTION (DESKTOP) */
        #personal-hero {
            height: 100vh;
            min-height: 100vh;
            display: flex;
            flex-direction: row; 
            align-items: center;
            justify-content: center; 
            padding-top: 0; 
            perspective: 1000px; 
        }

        .hero-text-col {
            flex: 1;
            z-index: 2;
            will-change: transform;
            transition: transform 0.1s ease-out;
            transform-style: preserve-3d;
            text-align: left;
        }

        .hero-image-col {
            flex: 1;
            display: flex;
            justify-content: flex-end; 
            align-items: flex-end; 
            position: relative;
            z-index: 2;
            height: 100vh; 
            padding-top: 80px; 
            box-sizing: border-box;
        }

        .greeting { font-size: 1.2rem; margin-bottom: 20px; opacity: 0; color: #fff; }

        h1.main-name {
            font-family: 'Playfair Display', serif;
            font-size: 6rem;
            font-weight: 400;
            line-height: 0.9;
            margin: 0;
            color: #fff;
            opacity: 0;
            transform-style: preserve-3d;
            will-change: transform;
        }

        .hero-subtitle {
            font-family: 'Manrope', sans-serif;
            font-size: 1.5rem;
            font-weight: 200;
            margin-top: 30px;
            max-width: 500px;
            line-height: 1.4;
            color: #ccc;
            opacity: 0;
        }

        .portrait-img {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            border-radius: 0; 
            opacity: 0;
            transform: translateY(30px);
            box-shadow: -40px 0 100px rgba(0,0,0,0.9), 0 0 100px rgba(0,0,0,0.9) inset;
            z-index: 5; 
            position: absolute; 
            top: 0;
            left: 0;
            filter: grayscale(100%) brightness(1.2); 
        }

        .scroll-hint {
            position: absolute;
            bottom: 40px;
            left: 10%; 
            transform: translateX(0); 
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0;
        }
        
        .line { width: 1px; height: 60px; background: linear-gradient(to bottom, #fff, transparent); }

        /* 2. SKILLS SECTION */
        #skills {
            min-height: 150vh;
            align-items: center; 
            display: flex; 
            flex-direction: row;
            justify-content: center; 
            gap: 30px; 
            pointer-events: auto; 
            padding-top: 150px; 
        }
        
        .skills-heading { font-family: 'Playfair Display', serif; font-size: 3rem; margin-bottom: 30px; color: #fff; line-height: 1; }
        
        .skills-content { flex: 0 0 650px; max-width: 65%; z-index: 2; }
        
        .philosophy-text {
            font-size: 1.15rem; line-height: 1.7; color: #ddd; margin-bottom: 50px; font-weight: 300;
            border-left: 1px solid rgba(255,255,255,0.2); padding-left: 20px;
        }

        .skills-grid-container { display: flex; flex-direction: column; gap: 20px; align-items: flex-start; }

        .skills-visual { flex: 1; height: 500px; position: relative; z-index: 2; pointer-events: none; display: flex; align-items: center; justify-content: center; }

        .section-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 3px; color: #aaa; margin-bottom: 20px; display: block; }

        .skill-category { margin-bottom: 10px; }

        .skill-cat-title {
            font-size: 0.9rem; color: #888; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px;
            display: block; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; width: 100%;
        }

        .skill-item {
            font-family: 'Playfair Display', serif; font-size: 2.5rem; color: #fff; margin-bottom: 0.5rem; opacity: 0.9;
            cursor: pointer; position: relative; transition: color 0.2s; pointer-events: auto; line-height: 1; padding: 5px 0; 
        }
        
        .skill-item:hover { color: #dccbb5; }

        /* SKILL LOGO PLACEHOLDER */
        .skill-logo-placeholder {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 450px; height: 450px; opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease; display: flex; align-items: center; justify-content: center;
        }
        
        .skill-logo-placeholder img { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 0 10px rgba(0, 150, 255, 0.4)); }
        
        .skill-item:hover + .skills-visual .skill-logo-placeholder { opacity: 1; transform: translate(-50%, -50%) scale(1.02); }

        /* 3. EXPERIENCE */
        #experience { display: flex; flex-direction: row; justify-content: center; align-items: center; gap: 50px; }

        .experience-content { flex: 1; z-index: 5; }
        
        .experience-list {
            display: flex; flex-direction: column; gap: 40px; background: rgba(5, 5, 5, 0.6); backdrop-filter: blur(20px);    
            padding: 40px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); box-shadow: 0 20px 50px rgba(0,0,0,0.5); position: relative;
        }

        .exp-item { position: relative; padding-left: 30px; border-left: 1px solid rgba(255,255,255,0.2); padding-bottom: 10px; }
        .exp-item::before { content: ''; position: absolute; left: -6px; top: 10px; width: 11px; height: 11px; background: #fff; border-radius: 50%; box-shadow: 0 0 10px rgba(255,255,255,0.5); }
        .exp-role { font-family: 'Playfair Display', serif; font-size: 2.5rem; color: #fff; margin-bottom: 5px; line-height: 1.1; text-shadow: 0 2px 10px rgba(0,0,0,0.8); }
        .exp-company { font-size: 1rem; color: #dccbb5; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; display: block; }
        .exp-date { font-size: 0.85rem; color: #999; margin-bottom: 15px; font-family: 'Manrope', monospace; }
        .exp-desc { font-size: 1rem; line-height: 1.6; color: #ddd; max-width: 600px; font-weight: 300; }
        
        .certificate-btn {
            background: rgba(255, 255, 255, 0.1); color: #fff; border: 1px solid rgba(255, 255, 255, 0.2); padding: 8px 20px;
            border-radius: 50px; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; cursor: pointer;
            transition: background 0.3s, color 0.3s, transform 0.2s; margin-top: 15px; display: inline-flex; align-items: center; text-decoration: none; gap: 8px; pointer-events: auto; 
        }
        .certificate-btn:hover { background: #fff; color: #050505; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255, 255, 255, 0.1); }
        
        .experience-visual { flex: 1; height: 600px; position: relative; display: flex; align-items: center; justify-content: center; pointer-events: auto; z-index: 5; }
        #experience-blob-container { width: 100%; height: 100%; }
        
        /* 4. VATTEN INTRO */
        #collection-hero { align-items: flex-start; justify-content: center; }
        .collection-tag { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 4px; color: #8899aa; margin-bottom: 20px; }
        h2.collection-title { font-family: 'Playfair Display', serif; font-size: 8rem; line-height: 0.9; margin: 0; color: #fff; opacity: 1; }
        .concept-text { max-width: 500px; margin-top: 40px; font-size: 1.1rem; line-height: 1.6; color: #aaa; font-weight: 300; border-left: 1px solid rgba(255,255,255,0.2); padding-left: 20px; }
        
        .explore-btn {
            background: #fff; color: #050505; padding: 15px 35px; border: none; border-radius: 50px; font-size: 0.9rem;
            text-transform: uppercase; letter-spacing: 2px; cursor: pointer; transition: all 0.3s; margin-top: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); pointer-events: auto;
        }
        .explore-btn:hover { transform: scale(1.05); box-shadow: 0 15px 40px rgba(0,0,0,0.7); }

        /* 5. FURNITURE SECTIONS (DESKTOP) */
        .product-section {
            display: flex; justify-content: space-between; align-items: center; padding-top: 150px; padding-bottom: 150px;
            gap: 50px; position: relative; overflow: visible; 
        }
        
        .state-label {
            position: absolute; top: 50px; left: 10%; font-size: 0.9rem; letter-spacing: 4px; color: #fff;
            opacity: 0.4; text-transform: uppercase; pointer-events: none; z-index: 1;
        }

        .product-text-content-wrapper { flex: 0 0 35%; z-index: 21; text-align: left; align-items: flex-start; }
        
        .product-title { font-family: 'Playfair Display', serif; font-size: 5rem; margin: 10px 0; color: #fff; line-height: 1; }
        .product-subtitle { font-size: 1.2rem; color: #00ffff; margin-bottom: 20px; }
        .product-desc { font-size: 1rem; color: #ccc; line-height: 1.6; margin-bottom: 30px; }

        .product-image-col {
            flex: 0 0 65%; position: relative; display: flex; align-items: center; justify-content: center;
            isolation: isolate; height: auto; overflow: visible; z-index: 20; 
        }
        
        /* DESKTOP IMAGE SIZE FIX */
        .product-image-wrapper { position: relative; display: inline-block; width: 100%; text-align: center; }
        .product-img {
            width: 100%; max-width: 1100px; /* Increased size to dominate left side */
            height: auto; object-fit: cover; display: block;
            border-radius: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); transition: transform 0.1s ease-out;
        }

        .product-section.right-align { flex-direction: row-reverse; }
        
        .specs-box { margin-left: 0 !important; margin-right: auto !important; margin-top: 30px; }
        .spec-row { display: flex; justify-content: space-between; margin-bottom: 8px; gap: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        .spec-key { display: inline-block; width: 100px; box-sizing: border-box; text-align: left; flex-shrink: 0; color: #888; font-weight: 400; }
        .spec-value { flex-grow: 1; width: auto; color: #ccc; font-weight: 500; text-align: right; }
        
        .water-interaction-area { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; pointer-events: auto; }
        
        /* 360 BUTTON - FIXED TO IMAGE */
        .view-3d-btn {
            position: absolute; bottom: 40px; right: 40px; background: rgba(0,0,0,0.7); backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3); color: #fff; padding: 12px 25px; border-radius: 50px;
            font-family: 'Manrope', sans-serif; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px;
            cursor: pointer; z-index: 100; /* High Z-index to be clickable */
            opacity: 1; transform: translateY(0); transition: all 0.3s ease; display: flex; align-items: center; gap: 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        .view-3d-btn:hover { background: #fff; color: #000; transform: translateY(-2px); }

        /* 6. FAMILY SECTION */
        #family-section { align-items: center; text-align: center; }
        .family-img-container { width: 80%; max-width: 1200px; height: auto; margin: 30px auto; position: relative; display: flex; justify-content: center; align-items: center; }
        .family-img { width: 100%; height: 100%; object-fit: contain; border-radius: 30px; box-shadow: 0 40px 100px rgba(0,0,0,0.9); border: 1px solid rgba(255,255,255,0.1); mix-blend-mode: normal; }

        /* 7. PARKINSYNC SECTIONS */
        #parkinsync-intro { padding-top: 150px; padding-bottom: 60px; min-height: auto; }
        #parkinsync-details { padding-top: 0; padding-bottom: 60px; min-height: auto; }
        
        .two-col-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 60px; width: 100%; }
        
        #parkinsync-visual { padding-top: 0; padding-bottom: 150px; justify-content: center; align-items: center; min-height: auto; }
        /* Constrain ParkinSync image on desktop */
        #parkinsync-visual .family-img-container { max-width: 1000px; }

        /* 8. SELECTED WORKS GALLERY */
        #other-projects { min-height: 100vh; padding-top: 150px; padding-bottom: 100px; }
        .project-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 40px; max-width: 1400px; margin: 0 auto; width: 100%;
        }
        
        .project-item {
            position: relative; display: block; overflow: hidden; height: 350px; 
            border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.3); text-decoration: none; cursor: pointer;
            /* ENSURE CLICKS WORK */
            pointer-events: auto;
        }
        .project-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; filter: brightness(0.85); }
        .project-item:hover img { transform: scale(1.05); filter: brightness(1.0); }
        
        /* TYPOGRAPHY FIX: Font changed to Playfair Display */
        .project-title-overlay {
            position: absolute; bottom: 0; left: 0; right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%); 
            padding: 20px; padding-top: 50px; color: #fff;
        }
        
        .project-title-overlay h4 {
            font-family: 'Playfair Display', serif !important; /* Enforced font */
            font-size: 1.5rem;
            margin: 0;
            line-height: 1.2;
            font-weight: 400;
        }
        
        .play-icon-overlay { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.2); opacity: 1; transition: opacity 0.3s ease; }

        /* --- NEW ELEMENTS STYLES --- */
        .software-note {
            font-size: 0.75rem; color: #666; text-transform: uppercase; letter-spacing: 2px;
            margin-top: 15px; display: flex; align-items: center; gap: 8px;
        }
        .software-note::before { content: ''; display: block; width: 6px; height: 6px; background-color: #ea7600; border-radius: 50%; }

        .project-doc-btn {
            display: inline-block; margin-top: 0; margin-bottom: 40px; padding: 12px 30px;
            background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.5);
            color: #fff; text-transform: uppercase; letter-spacing: 2px; font-size: 0.8rem;
            border-radius: 50px; text-decoration: none; transition: all 0.3s ease;
        }
        .project-doc-btn:hover { background: #fff; color: #000; box-shadow: 0 0 20px rgba(255, 255, 255, 0.2); }

        /* 9. CONTACT */
        #contact-section { padding-top: 150px; min-height: 80vh; justify-content: flex-start; }
        .contact-form-container { width: 100%; max-width: 700px; margin-top: 30px; background: rgba(5, 5, 5, 0.6); backdrop-filter: blur(10px); padding: 40px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.05); box-shadow: 0 10px 30px rgba(0,0,0,0.5); pointer-events: auto; }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; color: #aaa; margin-bottom: 8px; }
        .form-group input, .form-group textarea { width: 100%; padding: 15px; border: 1px solid rgba(255,255,255,0.1); background-color: rgba(255,255,255,0.05); color: #fff; border-radius: 8px; font-size: 1rem; font-family: 'Manrope', sans-serif; transition: border-color 0.3s; }
        .form-group input:focus, .form-group textarea:focus { outline: none; border-color: #dccbb5; }
        .form-group textarea { resize: vertical; min-height: 150px; }
        .submit-btn { background: #dccbb5; color: #050505; padding: 15px 35px; border: none; border-radius: 8px; font-size: 0.9rem; font-weight: 600; text-transform: uppercase; letter-spacing: 2px; cursor: pointer; transition: all 0.3s; box-shadow: 0 5px 15px rgba(220, 203, 181, 0.3); width: 100%; }
        .submit-btn:hover { background: #fff; transform: translateY(-2px); box-shadow: 0 5px 20px rgba(255, 255, 255, 0.5); }


        /* --- MOBILE PORTRAIT RESPONSIVE STYLES (MAX-WIDTH: 480px) --- */
        @media (max-width: 480px) {
            /* 1. NAV BAR FIX */
            .nav-bar { background: rgba(5,5,5,0.98); gap: 10px; flex-direction: column; padding: 15px 20px; }
            .brand { margin-bottom: 0; width: 100%; text-align: center; }
            .role { display: none; }
            .menu-links { width: 100%; justify-content: center; font-size: 0.7rem; flex-wrap: wrap; gap: 15px; }

            /* 2. HERO SPACING FIX */
            #personal-hero { 
                flex-direction: column; 
                justify-content: flex-start; 
                padding-top: 180px; 
                gap: 0; 
                min-height: auto; 
                padding-bottom: 20px;
            }
            .hero-text-col { order: 1; width: 100%; padding-top: 0; margin-bottom: 0; flex: 0 0 auto; }
            .hero-image-col { order: 2; width: 100%; height: auto; min-height: 250px; justify-content: center; align-items: flex-start; padding-top: 0; margin-top: 20px; margin-bottom: 0; }

            /* 3. FURNITURE LAYOUT FIX */
            .product-section, .product-section.right-align { display: flex; flex-direction: column; gap: 30px; padding-top: 60px; }
            .state-label { position: relative; top: auto; left: auto; transform: none; margin-bottom: 15px; opacity: 0.5; width: 100%; text-align: center; order: 1; }
            .product-image-col { width: 100%; height: auto; flex: 0 0 auto; margin-bottom: 20px; display: flex; flex-direction: column; align-items: center; order: 2; }
            .product-img { max-width: 100%; } 
            .product-text-content-wrapper { align-items: center; text-align: center; flex: 0 0 100%; order: 3; }
            
            /* 3D Button Position Mobile */
            .view-3d-btn { position: absolute; bottom: 10px; right: 10px; padding: 8px 16px; font-size: 0.7rem; }

            /* 4. PARKINSYNC TWEAKS */
            #parkinsync-intro .collection-title { font-size: 15vw !important; } 
            #parkinsync-visual { padding-bottom: 60px; } 
            #other-projects { padding-top: 40px; padding-bottom: 60px; }
            .two-col-grid { grid-template-columns: 1fr; }
            .project-grid { grid-template-columns: 1fr; gap: 20px; }
            .scroll-hint { left: 50% !important; transform: translateX(-50%) !important; bottom: 20px !important; }
            .software-note { justify-content: center; }
        }

        /* 3D MODAL & VIDEO MODAL STYLES */
        #model-modal, #video-modal, #image-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95);
            z-index: 3000; opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
            display: flex; justify-content: center; align-items: center;
        }
        #model-modal.active, #video-modal.active, #image-modal.active { opacity: 1; pointer-events: auto; }
        #modal-canvas-container { width: 100%; height: 100%; position: absolute; top: 0; left: 0; }
        
        .modal-close, .video-modal-close, .image-modal-close {
            position: absolute; top: 40px; right: 40px; color: #fff; background: none; border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50%; width: 50px; height: 50px; cursor: pointer; z-index: 3100; display: flex; align-items: center; justify-content: center; transition: all 0.3s;
        }
        .modal-close:hover, .video-modal-close:hover, .image-modal-close:hover { background: #fff; color: #000; }
        
        /* FIX FOR ZOOMED IMAGES: USE CONTAIN */
        .video-container, .image-container { position: relative; width: 90%; max-width: 1200px; max-height: 90vh; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 50px rgba(0,0,0,0.8); display:flex; align-items:center; justify-content:center; }
        #video-player, #modal-image-display { 
            width: auto; height: auto; max-width: 100%; max-height: 90vh; display: block; object-fit: contain; 
        }
        
        .modal-overlay-message { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; max-width: 600px; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 10px; text-align: center; z-index: 220; pointer-events: none; color: #aaa; font-size: 0.9rem; line-height: 1.5; opacity: 0; transition: opacity 0.5s; }
        .modal-overlay-message.visible { opacity: 1; }
        .loading-text { position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%); color: #888; font-size: 0.8rem; letter-spacing: 2px; text-transform: uppercase; z-index: 210; }

        /* ANIMATIONS */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulse { 0% { opacity: 0.3; } 50% { opacity: 1; } 100% { opacity: 0.3; } }
        .fade-up-active { animation: fadeInUp 1.2s ease-out forwards; }
        .fade-in-active { animation: fadeIn 1.5s ease-out forwards; }
    </style>
</head>
<body class="locked">

    <div id="title-screen">
        <div class="massive-title">ALAN BELIM</div>
        <div class="scroll-prompt">SCROLL TO ENTER</div>
    </div>
    
    <div id="canvas-container"></div>
    
    <div id="model-modal">
        <div id="modal-canvas-container"></div>
        <button class="modal-close" onclick="closeModal()">✕</button>
        <div class="loading-text" id="modal-status">Initializing...</div>
        <div class="modal-overlay-message" id="model-warning-message">
            <p style="color: #ff5555; font-size: 1.1rem; margin-bottom: 20px;">** FILE NOT FOUND **</p>
            <p>Could not load the .glb file. Please ensure it is in the same folder as index.html.</p>
        </div>
    </div>
    
    <div id="video-modal">
        <div class="video-container">
            <button class="video-modal-close" onclick="closeVideoModal()">✕</button>
            <video id="video-player" controls loop playsinline></video>
        </div>
    </div>
    
    <div id="image-modal">
        <div class="image-container">
            <button class="image-modal-close" onclick="closeImageModal()">✕</button>
            <img id="modal-image-display" src="" alt="Full size render">
        </div>
    </div>


    <div id="main-content-wrapper">
        <div class="nav-bar">
            <div>
                <div class="brand">Alan Belim P.S.</div>
                <div class="role">Product Designer & Modeler</div>
            </div>
            
            <div class="menu-links">
                <div class="nav-dropdown-container">
                    <a href="javascript:void(0)" class="menu-link" onclick="return false;">Projects</a> 
                    <div class="nav-dropdown">
                        <a href="javascript:void(0)" onclick="scrollToElement('collection-hero'); return false;">Featured: VATTEN</a>
                        <a href="javascript:void(0)" onclick="scrollToElement('other-projects'); return false;">Other Works</a> 
                    </div>
                </div>
                <a href="javascript:void(0)" class="menu-link" onclick="scrollToElement('skills'); return false;">About</a>
                <a href="javascript:void(0)" class="menu-link" onclick="scrollToElement('contact-section'); return false;">Contact</a>
            </div>
        </div>

        <div class="ui-layer">
            
            <section id="personal-hero">
                <div class="hero-text-col">
                    <div class="greeting blend-text">Hello, I am</div>
                    <h1 class="main-name blend-text">Alan Belim</h1>
                    <p class="hero-subtitle blend-text">
                        I translate complex, human narratives into physical and digital forms. I specialize in craft-driven modeling and experiential design that tells a story.
                    </p>
                </div>
                <div class="hero-image-col">
                    <img src="ME.png" onerror="this.onerror=null;this.src='ME.png';" alt="Alan Belim Portrait" class="portrait-img">
                </div>
                
                <div class="scroll-hint" style="opacity: 0.7; animation: pulse 2s infinite;">
                    <div class="line"></div>
                    <span style="font-size: 0.7rem; letter-spacing: 2px; margin-top: 10px; color:#fff;">EXPLORE</span>
                </div>
            </section>

            <section id="skills">
                <div class="skills-content frosted-box">
                    <h2 class="skills-heading blend-text">My Philosophy & Toolbox</h2>
                    <span class="section-label blend-text">Skills & Software</span>
                    
                    <p class="philosophy-text blend-text">
                        I design to uncover meaning. For me, objects aren’t just made; they’re narrated. I’m drawn to the quiet details in form, material and behaviour that reveal why something should exist at all. My strength in 3D modelling helps me translate abstract ideas into tangible experiences that feel intentional and emotionally aware. I care about designing things that leave an impression not through noise, but through clarity, honesty and purpose.
                    </p>
                    
                    <div class="skills-grid-container blend-text">
                        <span class="skill-cat-title">Software Toolbox</span>
                        
                        <div class="skill-category">
                            <div class="skill-item" data-tool="Blender">Blender</div>
                            <div class="skill-item" data-tool="Rhino">Rhino</div>
                        </div>
                        <div class="skill-category">
                            <div class="skill-item" data-tool="Photoshop">Photoshop</div>
                            <div class="skill-item" data-tool="Illustrator">Illustrator</div>
                            <div class="skill-item" data-tool="Procreate">Procreate</div>
                        </div>
                    </div>
                </div>
                <!-- RESTORED: This container was missing its child in previous versions -->
                <div class="skills-visual" id="experience-blob-container">
                    <div id="logo-placeholder" class="skill-logo-placeholder"></div>
                </div>
            </section>

            <section id="experience">
                <div class="experience-content">
                    <span class="section-label blend-text" style="margin-bottom: 20px;">Experience</span>
                    <div class="experience-list">
                        <div class="exp-item">
                            <h3 class="exp-role">Freelance 3D Artist</h3>
                            <span class="exp-company">ADA Möbelwerke, Austria</span>
                            <div class="exp-date">2024 — Present</div>
                            <p class="exp-desc">Delivering high-fidelity 3D visualizations and product modeling solutions for upcoming furniture collections. Collaborating remotely with the design team to translate concepts into marketing-ready assets.</p>
                        </div>
                        <div class="exp-item">
                            <h3 class="exp-role">3D Modeller Intern</h3>
                            <span class="exp-company">ADA Möbelwerke, Austria</span>
                            <div class="exp-date">June 2025 — Aug 2025</div>
                            <p class="exp-desc">Key role in digitizing the bedding furniture catalog for the online configurator using Blender. Responsible for precision modeling, UV unwrapping, and ensuring asset optimization for real-time web deployment.</p>
                            <a href="alan_certificate.pdf" target="_blank" class="certificate-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-award"><circle cx="12" cy="8" r="7"/><path d="M8.21 13.89 7 22l5-2 5 2-1.21-8.11"/></svg>
                                View Certificate
                            </a>
                        </div>
                    </div>
                </div>
                <div class="experience-visual" id="experience-blob-container"></div>
            </section>

            <section id="collection-hero">
                <div class="collection-tag blend-text">Featured Collection</div>
                <h2 class="collection-title blend-text">VATTEN</h2>
                <p class="concept-text frosted-box blend-text">
                    Exploring the physical and emotional states of water: Flow, Expansion, and Stillness. 
                    Bridging the gap between organic chaos and Scandinavian rigidity.
                </p>
                <button class="explore-btn" onclick="scrollToElement('section-strom')">Explore the Journey</button>
            </section>

            <section class="product-section right-align" id="section-strom">
                <div class="state-label">THE STREAM / FLOW</div>
                <div class="product-text-content-wrapper">
                    <span class="product-number">01 — FLOW</span>
                    <h2 class="product-title">Ström</h2>
                    <div class="product-subtitle">The Continuous Current</div>
                    <p class="product-desc">The Journey Begins: Embodying the fast, directional energy of a river current. Ström is a study in continuous movement, defined by a single, uninterrupted loop of steam-bent Ash, urging the eye forward.</p>
                    <div class="specs-box">
                        <div class="spec-row"><span class="spec-key">Material</span> <span class="spec-value">Steam-bent Ash</span></div>
                        <div class="spec-row"><span class="spec-key">Finish</span> <span class="spec-value">Smoked Matte Oil</span></div>
                        <div class="software-note">Made in Blender</div>
                    </div>
                </div>
                <div class="product-image-col">
                    <div class="product-image-wrapper">
                        <img src="strom.png" onerror="this.onerror=null;this.src='strom.png';" alt="Strom Chair" class="product-img brightness-fix" data-speed="0.5" loading="lazy">
                        <button class="view-3d-btn" onclick="openModal('strom')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rotate-cw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-7.3 3.37L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 7.3-3.37L21 16"/><path d="M21 21v-5h-5"/></svg>
                            <span>360° View</span>
                        </button>
                    </div>
                </div>
                <div class="water-interaction-area" data-water-type="flow" id="water-area-strom"></div>
            </section>

            <section class="product-section right-align" id="section-vag">
                <div class="state-label">THE RIPPLE / IMPACT</div>
                <div class="product-text-content-wrapper">
                    <span class="product-number">02 — IMPACT</span>
                    <h2 class="product-title">Våg</h2>
                    <div class="product-subtitle">The Point of Resonance</div>
                    <p class="product-desc">A Moment of Force: Capturing the impact that breaks the surface. The design features deep, concentric reliefs mimicking the radial energy of a powerful water drop, spreading outward in measured resonance.</p>
                    <div class="specs-box">
                        <div class="spec-row"><span class="spec-key">Material</span> <span class="spec-value">Solid Ash Block</span></div>
                        <div class="spec-row"><span class="spec-key">Weight</span> <span class="spec-value">Heavy Base Anchor</span></div>
                        <div class="software-note">Made in Blender</div>
                    </div>
                </div>
                <div class="product-image-col">
                    <div class="product-image-wrapper">
                        <img src="vag.png" onerror="this.onerror=null;this.src='vag.png';" alt="Vag Table" class="product-img" data-speed="0.3" loading="lazy">
                        <button class="view-3d-btn" onclick="openModal('vag')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rotate-cw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-7.3 3.37L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 7.3-3.37L21 16"/><path d="M21 21v-5h-5"/></svg>
                            <span>360° View</span>
                        </button>
                    </div>
                </div>
                <div class="water-interaction-area" data-water-type="ripple" id="water-area-vag"></div>
            </section>

            <section class="product-section right-align" id="section-vila">
                <div class="state-label" style="left: 3%;">THE POOL / STILLNESS</div>
                <div class="product-text-content-wrapper">
                    <span class="product-number">03 — STILLNESS</span>
                    <h2 class="product-title">Vila</h2>
                    <div class="product-subtitle">The Final Calm</div>
                    <p class="product-desc">The Destination of Reflection: An island of calm reached after the flow and impact. The organic oak base cradles a soft bouclé landscape, mirroring the silent, perfect surface of a deep, undisturbed pool.</p>
                    <div class="specs-box">
                        <div class="spec-row"><span class="spec-key">Material</span> <span class="spec-value">Smoked Ash / Bouclé</span></div>
                        <div class="spec-row"><span class="spec-key">Function</span> <span class="spec-value">Push-to-open Storage</span></div>
                        <div class="software-note">Made in Blender</div>
                    </div>
                </div>
                <div class="product-image-col">
                    <div class="product-image-wrapper">
                        <img src="vila.png" onerror="this.onerror=null;this.src='vila.png';" alt="Vila Daybed" class="product-img" data-speed="0.4" loading="lazy">
                        <button class="view-3d-btn" onclick="openModal('vila')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rotate-cw"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-7.3 3.37L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 7.3-3.37L21 16"/><path d="M21 21v-5h-5"/></svg>
                            <span>360° View</span>
                        </button>
                    </div>
                </div>
                <div class="water-interaction-area" data-water-type="stillness" id="water-area-vila"></div>
            </section>

            <section id="family-section" style="align-items: center; text-align: center;">
                <h2 class="product-title blend-text" style="font-size: 3rem; width: 100%;">The Vatten Collection</h2>
                <p class="product-desc blend-text" style="margin: 20px auto;">A unified study in fluid dynamics and the complete journey of VATTEN.</p>
                
                <a href="vatten_project.pdf" target="_blank" class="project-doc-btn" style="margin-top: 0; margin-bottom: 40px; background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.5);">
                    View Full Documentation
                </a>

                <div class="family-img-container">
                    <img src="family.png" onerror="this.onerror=null;this.src='family.png';" alt="Vatten Collection" class="family-img" loading="lazy">
                </div>
                <div class="software-note" style="margin-top: 20px; justify-content: center;">Made in Blender</div>
            </section>
            
            <!-- NEW PARKINSYNC SECTION -->
            <section id="parkinsync-intro" style="padding-top: 150px; padding-bottom: 60px; min-height: auto;">
                <div class="collection-tag blend-text">Digital Product Design</div>
                <h2 class="collection-title blend-text" style="font-size: 6rem;">ParkinSync</h2>
                <p class="concept-text frosted-box blend-text">
                    A smart rhythmic cueing app designed to support Parkinson's patients experiencing Freezing of Gait (FoG). 
                    Providing personalized, adaptive mobility support without the need for external wearables.
                </p>
            </section>

            <section class="product-section" id="parkinsync-details" style="padding-top: 0; padding-bottom: 60px; min-height: auto;">
                <div class="product-text-content-wrapper frosted-box" style="flex: 0 0 100%; max-width: 100%; text-align: left;">
                    <div class="two-col-grid">
                        <div>
                            <h3 style="font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 20px; color: #fff;">The Challenge</h3>
                            <p style="color: #aaa; line-height: 1.6; margin-bottom: 20px;">Over 60% of people with Parkinson's experience Freezing of Gait (FoG)—a sudden inability to move. Traditional cueing methods are often static and lack personalization.</p>
                            <ul style="color: #aaa; line-height: 1.6; padding-left: 20px;">
                                <li>Sudden inability to move (FoG)</li>
                                <li>Happens during turns, starts, or stress</li>
                                <li>Need for real-time recovery support</li>
                            </ul>
                        </div>
                        <div>
                            <h3 style="font-family: 'Playfair Display', serif; font-size: 2rem; margin-bottom: 20px; color: #fff;">The Solution</h3>
                            <p style="color: #aaa; line-height: 1.6; margin-bottom: 20px;">ParkinSync utilizes the smartphone's built-in accelerometer to detect step irregularities and deploys timed rhythmic cues to assist motion recovery.</p>
                            <div class="specs-box" style="margin-top: 0;">
                                <div class="spec-row"><span class="spec-key">Tech</span> <span class="spec-value">Accelerometer & Gyroscope</span></div>
                                <div class="spec-row"><span class="spec-key">Feedback</span> <span class="spec-value">Audio / Haptic / Visual</span></div>
                                <div class="spec-row"><span class="spec-key">Platform</span> <span class="spec-value">iOS / Android</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="parkinsync-visual" style="padding-top: 0; padding-bottom: 150px; justify-content: center; align-items: center; min-height: auto;">
                <h3 class="product-title blend-text" style="font-size: 3rem; text-align: center; margin-bottom: 40px;">Concept Overview & Interface</h3>
                <div class="family-img-container" style="border-radius: 20px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.5); max-width: 1000px;">
                    <img src="ParkinSync.png" onerror="this.onerror=null;this.src='https://placehold.co/1200x800/101010/CCCCCC?text=ParkinSync+Poster';" alt="ParkinSync Project Poster" class="family-img">
                </div>
            </section>
            
            <section id="other-projects" style="min-height: 100vh; padding-top: 150px; padding-bottom: 100px;">
                <span class="section-label blend-text">Design & Visualization</span>
                <h2 class="product-title blend-text" style="font-size: 3rem; margin-bottom: 50px;">Selected Works</h2>
                
                <div class="project-grid">
                    <!-- Example item -->
                    <a href="javascript:void(0)" onclick="openVideoModal(event, 'works/iphone_ad.mp4');" class="project-item">
                         <img src="works/iphone_ad_poster.png" onerror="this.onerror=null;this.src='works/iphone_ad_poster.png';" alt="iPhone Ad Cinematic Thumbnail" loading="lazy">
                         <div class="play-icon-overlay">
                            <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="currentColor" style="color: #fff; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="m15.5 12-5-3v6z"/></svg>
                         </div>
                         <div class="project-title-overlay"><span>COMMERCIAL 3D AD</span><h4>iPhone 16e - Product Launch</h4></div>
                    </a>
                    <!-- Add remaining items here (abbreviated for length but full structure preserved) -->
                     <a href="javascript:void(0)" onclick="openVideoModal(event, 'works/marshall_speaker_ad.mp4');" class="project-item">
                        <img src="works/marshall_speaker_poster.png" onerror="this.onerror=null;this.src='works/marshall_speaker_poster.png'" alt="Marshall Speaker Ad" loading="lazy">
                        <div class="play-icon-overlay"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" style="color: #fff; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="m15.5 12-5-3v6z"/></svg></div>
                        <div class="project-title-overlay"><span>COMMERCIAL VISUAL</span><h4>Marshall Speaker Ad</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openVideoModal(event, 'works/something_slipper_ad.mp4');" class="project-item">
                        <img src="works/something_slipper_poster.png" onerror="this.onerror=null;this.src='works/something_slipper_poster.png'" alt="Something Slipper Ad" loading="lazy">
                        <div class="play-icon-overlay"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" style="color: #fff; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="m15.5 12-5-3v6z"/></svg></div>
                        <div class="project-title-overlay"><span>CONCEPT DESIGN</span><h4>Something Slipper Ad</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openVideoModal(event, 'works/cybermouse_concept.mp4');" class="project-item">
                        <img src="works/cybermouse_poster.png" onerror="this.onerror=null;this.src='works/cybermouse_poster.png'" alt="Cybermouse Concept" loading="lazy">
                         <div class="play-icon-overlay"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" style="color: #fff; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="m15.5 12-5-3v6z"/></svg></div>
                        <div class="project-title-overlay"><span>HARD SURFACE MODELLING</span><h4>Cybermouse Concept</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openVideoModal(event, 'works/walkman_animation.mp4');" class="project-item">
                        <img src="works/walkman_animation_poster.png" onerror="this.onerror=null;this.src='works/walkman_animation_poster.png'" alt="Walkman Animation Poster" loading="lazy">
                        <div class="play-icon-overlay"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" style="color: #fff; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="m15.5 12-5-3v6z"/></svg></div>
                        <div class="project-title-overlay"><span>PRODUCT ANIMATION</span><h4>Walkman - Cinematic</h4></div>
                    </a>
                     <a href="javascript:void(0)" onclick="openVideoModal(event, 'works/boat_ocean_animation.mp4');" class="project-item">
                        <img src="works/boat_ocean_poster.png" onerror="this.onerror=null;this.src='works/boat_ocean_poster.png'" alt="Boat Ocean Animation Poster" loading="lazy">
                        <div class="play-icon-overlay"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="currentColor" style="color: #fff; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8));"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="m15.5 12-5-3v6z"/></svg></div>
                        <div class="project-title-overlay"><span>ENVIRONMENTAL STUDY</span><h4>Ocean Boat Simulation</h4></div>
                    </a>
                    <!-- IMAGES -->
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/iphone_17_pro_max_1.png');" class="project-item">
                        <img src="works/iphone_17_pro_max_1.png" onerror="this.onerror=null;this.src='works/iphone_17_pro_max_1.png'" alt="iPhone 17 Pro Max Render 1" loading="lazy">
                         <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>iPhone 17 Pro Max (1)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/iphone_17_pro_max_2.png');" class="project-item">
                        <img src="works/iphone_17_pro_max_2.png" onerror="this.onerror=null;this.src='works/iphone_17_pro_max_2.png'" alt="iPhone 17 Pro Max Render 2" loading="lazy">
                        <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>iPhone 17 Pro Max (2)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/powerbank_daily_objects_1.png');" class="project-item">
                        <img src="works/powerbank_daily_objects_1.png" onerror="this.onerror=null;this.src='works/powerbank_daily_objects_1.png'" alt="Daily Objects Powerbank 1" loading="lazy">
                        <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>Powerbank Study (1)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/powerbank_daily_objects_2.png');" class="project-item">
                        <img src="works/powerbank_daily_objects_2.png" onerror="this.onerror=null;this.src='works/powerbank_daily_objects_2.png'" alt="Daily Objects Powerbank 2" loading="lazy">
                        <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>Powerbank Study (2)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/larq_bottle_1.png');" class="project-item">
                        <img src="works/larq_bottle_1.png" onerror="this.onerror=null;this.src='works/larq_bottle_1.png'" alt="LARQ Bottle 1" loading="lazy">
                        <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>LARQ Bottle (1)</h4></div>
                    </a>
                     <a href="javascript:void(0)" onclick="openImageModal(event, 'works/larq_bottle_2.png');" class="project-item">
                        <img src="works/larq_bottle_2.png" onerror="this.onerror=null;this.src='works/larq_bottle_2.png'" alt="LARQ Bottle 2" loading="lazy">
                        <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>LARQ Bottle (2)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/springer_pet_bottle.png');" class="project-item">
                        <img src="works/springer_pet_bottle.png" onerror="this.onerror=null;this.src='works/springer_pet_bottle.png'" alt="Springer Pet Bottle" loading="lazy">
                         <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>Springer Pet Bottle</h4></div>
                    </a>
                     <a href="javascript:void(0)" onclick="openImageModal(event, 'works/ptron_mobile_power_bank.png');" class="project-item">
                        <img src="works/ptron_mobile_power_bank.png" onerror="this.onerror=null;this.src='works/ptron_mobile_power_bank.png'" alt="Ptron Mobile Power Bank" loading="lazy">
                         <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>Ptron Power Bank</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/perfume_render_1.png');" class="project-item">
                        <img src="works/perfume_render_1.png" onerror="this.onerror=null;this.src='works/perfume_render_1.png'" alt="Perfume Render 1" loading="lazy">
                         <div class="project-title-overlay"><span>VISUAL STUDY</span><h4>Perfume Study (1)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/perfume_render_2.png');" class="project-item">
                        <img src="works/perfume_render_2.png" onerror="this.onerror=null;this.src='works/perfume_render_2.png'" alt="Perfume Render 2" loading="lazy">
                        <div class="project-title-overlay"><span>VISUAL STUDY</span><h4>Perfume Study (2)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/perfume_render_3.png');" class="project-item">
                        <img src="works/perfume_render_3.png" onerror="this.onerror=null;this.src='works/perfume_render_3.png'" alt="Perfume Render 3" loading="lazy">
                        <div class="project-title-overlay"><span>VISUAL STUDY</span><h4>Perfume Study (3)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/roger_pradier_light.png');" class="project-item">
                        <img src="works/roger_pradier_light.png" onerror="this.onerror=null;this.src='works/roger_pradier_light.png'" alt="Roger Pradier Light Render" loading="lazy">
                        <div class="project-title-overlay"><span>ARCHITECTURAL VIS.</span><h4>Pradier Light Render</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/studio_microphone.png');" class="project-item">
                        <img src="works/studio_microphone.png" onerror="this.onerror=null;this.src='works/studio_microphone.png'" alt="Studio Microphone Render" loading="lazy">
                        <div class="project-title-overlay"><span>PRODUCT RENDER</span><h4>Studio Microphone</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/walkman_render_1.png');" class="project-item">
                        <img src="works/walkman_render_1.png" onerror="this.onerror=null;this.src='works/walkman_render_1.png'" alt="Walkman Render 1" loading="lazy">
                        <div class="project-title-overlay"><span>HARD SURFACE</span><h4>Walkman Study (1)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/walkman_render_2.png');" class="project-item">
                        <img src="works/walkman_render_2.png" onerror="this.onerror=null;this.src='works/walkman_render_2.png'" alt="Walkman Render 2" loading="lazy">
                        <div class="project-title-overlay"><span>HARD SURFACE</span><h4>Walkman Study (2)</h4></div>
                    </a>
                     <a href="javascript:void(0)" onclick="openImageModal(event, 'works/walkman_render_3.png');" class="project-item">
                        <img src="works/walkman_render_3.png" onerror="this.onerror=null;this.src='works/walkman_render_3.png'" alt="Walkman Render 3" loading="lazy">
                        <div class="project-title-overlay"><span>HARD SURFACE</span><h4>Walkman Study (3)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/walkman_render_4.png');" class="project-item">
                        <img src="works/walkman_render_4.png" onerror="this.onerror=null;this.src='works/walkman_render_4.png'" alt="Walkman Render 4" loading="lazy">
                        <div class="project-title-overlay"><span>HARD SURFACE</span><h4>Walkman Study (4)</h4></div>
                    </a>
                    <a href="javascript:void(0)" onclick="openImageModal(event, 'works/walkman_render_5.png');" class="project-item">
                        <img src="works/walkman_render_5.png" onerror="this.onerror=null;this.src='works/walkman_render_5.png'" alt="Walkman Render 5" loading="lazy">
                        <div class="project-title-overlay"><span>HARD SURFACE</span><h4>Walkman Study (5)</h4></div>
                    </a>
                     <a href="javascript:void(0)" onclick="openImageModal(event, 'works/walkman_render_6.png');" class="project-item">
                        <img src="works/walkman_render_6.png" onerror="this.onerror=null;this.src='works/walkman_render_6.png'" alt="Walkman Render 6" loading="lazy">
                        <div class="project-title-overlay"><span>HARD SURFACE</span><h4>Walkman Study (6)</h4></div>
                    </a>

                </div>
            </section>
            
            <section id="contact-section">
                <span class="section-label blend-text">Get in Touch</span>
                <h2 class="product-title blend-text" style="font-size: 3rem; margin-bottom: 20px;">Contact Me</h2>
                <p class="product-desc blend-text" style="max-width: 700px; margin-bottom: 40px; color: #aaa;">Interested in collaboration, commissions, or just want to say hello? Use the form below to send me a message directly. *(Note: This form uses Formspree to ensure reliable delivery to your email address.)</p>
                <div class="contact-form-container frosted-box">
                    <form action="https://formspree.io/f/xnnejgdy" method="post" id="contact-form">
                        <div class="form-group"><label for="name">Your Name</label><input type="text" id="name" name="name" required placeholder="John Doe"></div>
                        <div class="form-group"><label for="email">Your Email Address</label><input type="email" id="email" name="_replyto" required placeholder="your.email@example.com"></div>
                        <div class="form-group"><label for="subject">Subject</label><input type="text" id="subject" name="subject" required placeholder="Project Inquiry / Collaboration"></div>
                        <div class="form-group"><label for="message">Message</label><textarea id="message" name="message" required placeholder="I saw your work on VATTEN and would love to discuss..."></textarea></div>
                        <button type="submit" class="submit-btn">Send Message</button>
                    </form>
                </div>
            </section>

            <section style="height: 30vh; min-height: 30vh; align-items: center; text-align: center; justify-content: center;">
                <p class="blend-text" style="opacity: 0.5; letter-spacing: 2px;">ALAN BELIM P.S. © 2025</p>
            </section>

        </div>
    </div> 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplex-noise/2.4.0/simplex-noise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/environments/RoomEnvironment.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/18.6.4/tween.min.js"></script>

    <script>
        // --- 1. GLOBAL VARIABLES ---
        let targetX = 0; 
        let targetY = 0;
        let currentMouse = new THREE.Vector2();
        let lastScrollY = 0; 
        let isModalOpen = false;
        
        // --- 2. CRITICAL FUNCTIONS (Global Scope) ---
        
        // OPEN IMAGE MODAL
        window.openImageModal = function(e, imageSrc) {
            if(e) e.preventDefault();
            lastScrollY = window.scrollY;
            const modalImageDisplay = document.getElementById('modal-image-display');
            const imageModal = document.getElementById('image-modal');
            
            if(modalImageDisplay && imageModal) {
                modalImageDisplay.src = imageSrc;
                imageModal.classList.add('active');
                document.body.classList.add('locked');
            }
        };

        // CLOSE IMAGE MODAL
        window.closeImageModal = function() {
            const imageModal = document.getElementById('image-modal');
            const modalImageDisplay = document.getElementById('modal-image-display');
            if(imageModal) imageModal.classList.remove('active');
            if(modalImageDisplay) modalImageDisplay.src = ''; 
            document.body.classList.remove('locked');
            window.scrollTo(0, lastScrollY);
        };

        // OPEN VIDEO MODAL
        window.openVideoModal = function(e, videoSrc) {
            if(e) e.preventDefault();
            lastScrollY = window.scrollY;
            const videoModal = document.getElementById('video-modal');
            const videoPlayer = document.getElementById('video-player');
            
            if(videoPlayer && videoModal) {
                videoPlayer.src = videoSrc;
                videoModal.classList.add('active');
                document.body.classList.add('locked');
                
                videoPlayer.muted = false; 
                videoPlayer.loop = true; 
                
                videoPlayer.play().catch(error => {
                    console.warn("Video playback failed, trying muted:", error);
                    videoPlayer.muted = true;
                    videoPlayer.play();
                });
            }
        };
        
        // CLOSE VIDEO MODAL
        window.closeVideoModal = function() {
            const videoModal = document.getElementById('video-modal');
            const videoPlayer = document.getElementById('video-player');
            
            if(videoPlayer) {
                videoPlayer.pause();
                videoPlayer.src = ''; 
            }
            if(videoModal) videoModal.classList.remove('active');
            document.body.classList.remove('locked');
            window.scrollTo(0, lastScrollY);
        };

        // SCROLL TO ELEMENT
        window.scrollToElement = function(elementId) {
            const element = document.getElementById(elementId);
            if(element) { element.scrollIntoView({ behavior: 'smooth' }); }
        };

        // --- 3. LOGO LOGIC ---
        const LOGO_DATA = {
            'Blender': { src: 'logos/blender.png' },      
            'Rhino': { src: 'logos/rhino.png' },          
            'Photoshop': { src: 'logos/photoshop.png' },  
            'Illustrator': { src: 'logos/illustrator.png' }, 
            'Procreate': { src: 'logos/procreate.png' }   
        };

        const logoPlaceholder = document.getElementById('logo-placeholder');
        
        if (logoPlaceholder) { 
            document.querySelectorAll('.skill-item').forEach(item => {
                item.addEventListener('mouseenter', (e) => {
                    const tool = e.target.getAttribute('data-tool');
                    const logo = LOGO_DATA[tool];
                    if (logo) {
                        logoPlaceholder.innerHTML = `<img src="${logo.src}" alt="${tool} Logo" onerror="this.onerror=null;this.src='https://placehold.co/100x100/333/fff?text=${tool}';" >`;
                    } else {
                        logoPlaceholder.innerHTML = '';
                    }
                    logoPlaceholder.style.opacity = 1;
                    logoPlaceholder.style.transform = 'translate(-50%, -50%) scale(1.0)';
                });
                item.addEventListener('mouseleave', () => {
                    logoPlaceholder.innerHTML = '';
                    logoPlaceholder.style.opacity = 0;
                    logoPlaceholder.style.transform = 'translate(-50%, -50%) scale(0.95)';
                });
            });
        }

        // --- 4. THREE.JS SCENE SETUP ---
        let modelLoadComplete = false;
        let currentModel = null;
        let loadingAnim = null;
        let modalScene, modalCamera, modalRenderer, modalControls;
        let renderer, camera, scene, particlesGeo, particlesMat, particleSystem, geometry, material, plane, interactionPlane, raycaster;
        let posAttribute, originalPositions;
        
        // Define interactionTarget so it exists in scope
        let interactionTarget = new THREE.Vector3(999, 999, 999);

        const canvasContainer = document.getElementById('canvas-container');

        // Check if Three.js loaded
        if (typeof THREE !== 'undefined' && canvasContainer) {
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x050505, 0.01); 
            
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 8); 
            const camLight = new THREE.PointLight(0xffffff, 1, 100);
            camera.add(camLight);
            scene.add(camera);

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.physicallyCorrectLights = true;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;
            canvasContainer.appendChild(renderer.domElement);

            const ambientLight = new THREE.AmbientLight(0x222222, 3.0); 
            scene.add(ambientLight);
            
            const light1 = new THREE.PointLight(0x88aacc, 200, 100); light1.position.set(5, 10, 5); scene.add(light1);
            const light2 = new THREE.PointLight(0xccaa88, 120, 100); light2.position.set(-10, 2, 5); scene.add(light2);
            const light3 = new THREE.DirectionalLight(0xffffff, 3.0); light3.position.set(0, 5, -10); light3.lookAt(0,0,0); scene.add(light3);

            const particlesCount = 1500;
            const pArray = new Float32Array(particlesCount * 3);
            const pSpeeds = new Float32Array(particlesCount);
            for(let i=0; i<particlesCount * 3; i+=3) {
                pArray[i] = (Math.random() - 0.5) * 40;     
                pArray[i+1] = (Math.random() - 0.5) * 40;   
                pArray[i+2] = (Math.random() - 0.5) * 100;
                pSpeeds[i/3] = Math.random();
            }
            particlesGeo = new THREE.BufferGeometry();
            particlesGeo.setAttribute('position', new THREE.BufferAttribute(pArray, 3));
            particlesMat = new THREE.PointsMaterial({ size: 0.03, color: 0x88ccff, transparent: true, opacity: 0.4, blending: THREE.AdditiveBlending, sizeAttenuation: true });
            particleSystem = new THREE.Points(particlesGeo, particlesMat);
            scene.add(particleSystem);

            geometry = new THREE.PlaneGeometry(80, 80, 400, 400); 
            material = new THREE.MeshStandardMaterial({ color: 0x1a1a1a, roughness: 0.1, metalness: 0.9, flatShading: false });
            plane = new THREE.Mesh(geometry, material);
            plane.rotation.x = -0.2; 
            scene.add(plane);

            const simplex = new SimplexNoise();
            posAttribute = geometry.attributes.position;
            originalPositions = posAttribute.array.slice();

            raycaster = new THREE.Raycaster();
            interactionPlane = new THREE.Mesh(new THREE.PlaneGeometry(100, 100), new THREE.MeshBasicMaterial({ visible: false }));
            interactionPlane.rotation.x = -0.2;
            scene.add(interactionPlane);
            
            // Animation variables
            const clock = new THREE.Clock();
            const smoothMouse = new THREE.Vector2(); 
            
            let activeWaterArea = null; 
            let isHoveringInteractionArea = false; 
            let interactionWeight = 0.0;
            
            // Interaction logic
            const waterAreas = document.querySelectorAll('.water-interaction-area');
            waterAreas.forEach(area => {
                area.addEventListener('mouseenter', () => { 
                    activeWaterArea = area; 
                    isHoveringInteractionArea = true; 
                    canvasContainer.style.pointerEvents = 'auto'; 
                });
                area.addEventListener('mouseleave', () => { 
                    isHoveringInteractionArea = false; 
                    canvasContainer.style.pointerEvents = 'none'; 
                });
            });

            document.addEventListener('mousemove', (e) => {
                targetX = (e.clientX / window.innerWidth) * 2 - 1;
                targetY = -(e.clientY / window.innerHeight) * 2 + 1;
                currentMouse.x = targetX;
                currentMouse.y = targetY;
            });
            
            // START ANIMATION LOOP
            animate(); 

            // Animation Loop Function
            function animate() {
                requestAnimationFrame(animate);
                const time = clock.getElapsedTime();
                if (window.TWEEN) TWEEN.update();

                // 3D Modal logic
                if(isModalOpen && modalRenderer) {
                    modalControls.update();
                    if(loadingAnim) {
                        loadingAnim.rotation.y += 0.05;
                    }
                    if(currentModel && !modelLoadComplete) { currentModel.rotation.y += 0.005; }
                    modalRenderer.render(modalScene, modalCamera);
                }

                // Smooth Scroll Sim
                let scrollY = window.scrollY; // Use actual scroll
                
                // --- FIX: TEXT VIBRATION ---
                // Smooth mouse interpolation for text
                smoothMouse.x += (targetX - smoothMouse.x) * 0.08;
                smoothMouse.y += (targetY - smoothMouse.y) * 0.08; 
                
                // Hero Text Parallax (Using smoothed values)
                const textCol = document.querySelector('.hero-text-col');
                if (textCol) { textCol.style.transform = `rotateY(${smoothMouse.x * 2}deg) rotateX(${-smoothMouse.y * 1}deg)`; }

                // Parallax Images
                const images = document.querySelectorAll('.product-img');
                images.forEach(img => {
                    const speed = img.getAttribute('data-speed');
                    if(speed) {
                        const rect = img.parentElement.getBoundingClientRect();
                        const centerY = window.innerHeight / 2;
                        const dist = (rect.top + rect.height/2) - centerY;
                        img.style.transform = `translateY(${dist * speed * 0.2}px)`;
                    }
                });

                // --- FIX: DISTINCT WATER ANIMATIONS ---
                // We determine which section is active based on scroll or hover
                
                // Calculate Section Weights
                const sectionHeight = window.innerHeight;
                const absolutePos = scrollY / sectionHeight;
                
                // Simple weight calculation based on scroll position relative to sections
                // This is a simplified version of the logic to keep it robust
                
                function getSectionWeight(id) {
                    const el = document.getElementById(id);
                    if (!el) return 0;
                    const rect = el.getBoundingClientRect();
                    const center = rect.top + rect.height / 2;
                    const dist = Math.abs(center - window.innerHeight / 2);
                    // Active when near center of screen
                    return Math.max(0, 1 - dist / (window.innerHeight * 0.7)); 
                }

                let wStrom = getSectionWeight('section-strom');
                let wVag = getSectionWeight('section-vag');
                let wVila = getSectionWeight('section-vila');
                
                let wIntro = 0;
                if (absolutePos < 1.0) wIntro = 1.0 - smoothstep(0.0, 1.0, absolutePos);

                // Water Physics Logic Restored
                if (isHoveringInteractionArea) {
                    interactionWeight += (1.0 - interactionWeight) * 0.2;
                    raycaster.setFromCamera(currentMouse, camera);
                    const intersects = raycaster.intersectObject(interactionPlane);
                    if (intersects.length > 0) { 
                        interactionTarget = intersects[0].point;
                    }
                } else if (interactionWeight > 0.005) {
                    interactionWeight *= 0.85; 
                } else {
                     interactionWeight = 0.0;
                }
                
                // Helper
                function smoothstep(min, max, value) { var x = Math.max(0, Math.min(1, (value-min)/(max-min))); return x*x*(3 - 2*x); }
                
                // Camera
                let cameraZ = 8, cameraY = 0, cameraRX = 0, cameraRZ = 0;
                cameraRX = -smoothMouse.y * 0.03;
                cameraRZ = smoothMouse.x * 0.03;
                camera.position.set(0, cameraY, cameraZ);
                camera.rotation.set(cameraRX, 0, cameraRZ);
                plane.position.y = -cameraY; 
                plane.rotation.x = cameraRX - 0.2; 
                
                // Geometry Update
                const hitPoint = interactionTarget;

                for (let i = 0; i < posAttribute.count; i++) {
                    const x = originalPositions[i * 3];
                    const y = originalPositions[i * 3 + 1];
                    let totalZ = 0;
                    
                    // Base Noise (Intro)
                    if (wIntro > 0.01) {
                         let z = simplex.noise3D(x * 0.2, y * 0.2, time * 0.15) * 0.15;
                         totalZ += z * wIntro;
                    }

                    // --- DISTINCT ANIMATIONS ---
                    
                    // 1. Ström (Flow) - Directional River
                    if (wStrom > 0.01) {
                        const flowSpeed = time * 1.5;
                        // Directional noise moving along X/Y
                        const flow = simplex.noise2D(x * 0.3 + flowSpeed, y * 0.3) * 0.4;
                        totalZ += flow * wStrom;
                    }

                    // 2. Våg (Ripple/Impact) - Radial Waves
                    if (wVag > 0.01) {
                         // Radial sine wave from center (or slightly offset)
                         const distFromCenter = Math.sqrt(x*x + y*y);
                         const ripple = Math.sin(distFromCenter * 2.0 - time * 3.0) * 0.3;
                         totalZ += ripple * wVag;
                    }

                    // 3. Vila (Stillness) - Very Subtle, Slow Movement
                    if (wVila > 0.01) {
                        const calm = simplex.noise3D(x * 0.1, y * 0.1, time * 0.1) * 0.15;
                        totalZ += calm * wVila;
                    }

                    // Interactive Mouse Ripple (Global override)
                    if(interactionWeight > 0.01) {
                        const dist = hitPoint.distanceTo(new THREE.Vector3(x, y, 0));
                        if (dist < 12) {
                            const ripple = Math.sin(dist * 2.5 - time * 8.0) * 0.5;
                            const decay = Math.exp(-dist * 0.2);
                            totalZ += ripple * decay * interactionWeight;
                        }
                    }

                    posAttribute.setZ(i, totalZ); 
                }
                
                posAttribute.needsUpdate = true;
                geometry.computeVertexNormals();
                renderer.render(scene, camera);
            }
        } // End of Three.js block

        // --- 5. MODAL 3D LOGIC ---
        
        window.openModal = function(type) {
            // Lazy init renderer
            if(!modalRenderer) {
                const container = document.getElementById('modal-canvas-container');
                if(!container) return;
                modalScene = new THREE.Scene();
                modalScene.background = new THREE.Color(0x050505); 
                modalCamera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
                modalCamera.position.set(0, 2, 5);
                modalRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                modalRenderer.setSize(container.clientWidth / container.clientHeight);
                modalRenderer.physicallyCorrectLights = true;
                modalRenderer.toneMapping = THREE.ACESFilmicToneMapping;
                modalRenderer.toneMappingExposure = 1.0; 
                modalRenderer.outputEncoding = THREE.sRGBEncoding;
                container.appendChild(modalRenderer.domElement);
                
                const pmremGenerator = new THREE.PMREMGenerator(modalRenderer);
                pmremGenerator.compileEquirectangularShader();
                const roomEnvironment = new THREE.RoomEnvironment();
                modalScene.environment = pmremGenerator.fromScene(roomEnvironment).texture;
                
                const dirLight = new THREE.DirectionalLight(0xffffff, 3.5); dirLight.position.set(5, 10, 7); modalScene.add(dirLight);
                const fillLight = new THREE.DirectionalLight(0xffeedd, 2.0); fillLight.position.set(-5, 2, -5); modalScene.add(fillLight);
                
                modalControls = new THREE.OrbitControls(modalCamera, modalRenderer.domElement);
                modalControls.enableDamping = true;
                modalControls.dampingFactor = 0.05;
            }
            
            document.getElementById('model-modal').classList.add('active');
            const modelWarningMessage = document.getElementById('model-warning-message');
            if(modelWarningMessage) modelWarningMessage.classList.remove('visible'); 
            lastScrollY = window.scrollY; 
            isModalOpen = true;
            
            // Resize logic
            const container = document.getElementById('modal-canvas-container');
            modalRenderer.setSize(container.clientWidth, container.clientHeight);
            modalCamera.aspect = container.clientWidth / container.clientHeight;
            modalCamera.updateProjectionMatrix();

            if(currentModel) { modalScene.remove(currentModel); currentModel = null; }
            if(loadingAnim) { modalScene.remove(loadingAnim); loadingAnim = null; }
            
            const status = document.getElementById('modal-status');
            if(status) { status.innerText = "LOADING MODEL..."; status.style.opacity = 1; }
            
            // Start Loading Anim
            modelLoadComplete = false;
            let geo, mat;
            geo = new THREE.IcosahedronGeometry(0.5, 1);
            mat = new THREE.MeshBasicMaterial({ color: 0x00ffff, wireframe: true, transparent: true, opacity: 0.3 });
            loadingAnim = new THREE.Mesh(geo, mat);
            modalScene.add(loadingAnim);
            
            // Load Model
            const loader = new THREE.GLTFLoader();
            const modelPath = './' + type + '.glb'; 

            loader.load(modelPath, function (gltf) {
                if(!isModalOpen) return; 
                modelLoadComplete = true;
                if (loadingAnim) { modalScene.remove(loadingAnim); loadingAnim = null; }
                if(status) status.style.opacity = 0;
                
                currentModel = gltf.scene;
                const box = new THREE.Box3().setFromObject(currentModel);
                const size = box.getSize(new THREE.Vector3());
                const center = box.getCenter(new THREE.Vector3());
                const maxDim = Math.max(size.x, size.y, size.z);
                const scale = 5.0 / maxDim;
                currentModel.scale.set(scale, scale, scale);
                currentModel.position.x -= center.x * scale;
                currentModel.position.y -= center.y * scale;
                currentModel.position.z -= center.z * scale;

                modalScene.add(currentModel);
                modalControls.target.set(0,0,0);
                modalCamera.position.set(0, 2, 5);
                modalControls.update();

            }, undefined, function (error) {
                console.error(error);
                if (loadingAnim) { modalScene.remove(loadingAnim); loadingAnim = null; }
                if(status) status.innerText = "";
                if(modelWarningMessage) modelWarningMessage.classList.add('visible'); 
                
                // Show Fallback
                const meshMat = new THREE.MeshStandardMaterial({ color: 0x444444, metalness: 0.9, roughness: 0.2 });
                const wireMesh = new THREE.Mesh(geo, new THREE.MeshBasicMaterial({ color: 0x00ffff, wireframe: true, transparent: true, opacity: 0.5 }));
                const baseMesh = new THREE.Mesh(geo, meshMat);
                currentModel = new THREE.Group();
                currentModel.add(baseMesh);
                currentModel.add(wireMesh);
                modalScene.add(currentModel);
            });
        };
        
        window.closeModal = function() {
             document.getElementById('model-modal').classList.remove('active');
             isModalOpen = false;
             window.scrollTo(0, lastScrollY);
        }

        // --- 6. INITIALIZATION & LISTENERS ---
        let titleDismissed = false;
        const titleScreen = document.getElementById('title-screen');
        let scrollY = 0; 

        if (history.scrollRestoration) { history.scrollRestoration = 'manual'; }
        window.scrollTo(0, 0);

        function initExperienceBlob() {
             const container = document.getElementById('experience-blob-container');
             if(container && typeof THREE !== 'undefined') {
                 // Blob setup if needed
             }
        }

        function dismissTitle() {
            if(titleDismissed) return;
            titleDismissed = true;
            titleScreen.classList.add('disintegrate');
            setTimeout(() => {
                requestAnimationFrame(() => {
                    document.body.classList.remove('locked');
                    document.getElementById('canvas-container').style.opacity = 1;
                    document.querySelector('.ui-layer').style.opacity = 1;
                    document.querySelector('.nav-bar').style.opacity = 1;
                    document.querySelector('.nav-bar').style.transform = 'translateY(0)';
                    const heroElements = document.querySelectorAll('#personal-hero .greeting, #personal-hero .main-name, #personal-hero .hero-subtitle, #personal-hero .portrait-img');
                    heroElements.forEach(el => el.classList.add('fade-up-active'));
                    initExperienceBlob(); 
                    window.scrollTo({ top: 0, behavior: 'instant' }); 
                });
            }, 800);
        }
        
        // Initial interactions
        function handleInitialInteraction(e) { if (!titleDismissed) { dismissTitle(); } }
        window.addEventListener('wheel', handleInitialInteraction, { passive: false });
        window.addEventListener('touchmove', handleInitialInteraction, { passive: false });
        document.getElementById('title-screen').addEventListener('click', (e) => { if (!titleDismissed) { dismissTitle(); e.preventDefault(); } });
        
        // Handle window resize
        window.addEventListener('resize', () => {
             if(renderer) {
                 renderer.setSize(window.innerWidth, window.innerHeight);
                 camera.aspect = window.innerWidth / window.innerHeight;
                 camera.updateProjectionMatrix();
             }
        });

    </script>
</body>
</html>